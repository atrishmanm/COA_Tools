<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Computer Organization & Architecture Tools</title>
  
  <!-- Google Fonts: Poppins -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800;900&display=swap" rel="stylesheet">
  
  <!-- External CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>Computer Organization & Architecture Tools</h1>
    <div class="subtitle">Advanced Number System Converter & Educational Tools</div>
    
    <div class="tabs">
      <div class="tab active" onclick="openTab(event, 'number-converter')">Number Converter</div>
      <div class="tab" onclick="openTab(event, 'code-converters')">Code Converters</div>
      <div class="tab" onclick="openTab(event, 'ascii-converter')">ASCII Converter</div>
      <div class="tab" onclick="openTab(event, 'parity-calculator')">Parity Calculator</div>
      <div class="tab" onclick="openTab(event, 'binary-arithmetic')">Binary Arithmetic</div>
      <div class="tab" onclick="openTab(event, 'bcd-arithmetic')">BCD Arithmetic</div>
      <div class="tab" onclick="openTab(event, '8086-stack')">8086 Stack</div>
      <div class="tab" onclick="openTab(event, 'signed-numbers')">Signed Numbers</div>
      <div class="tab" onclick="openTab(event, 'ieee754')">IEEE 754 Float</div>
      <div class="tab" onclick="openTab(event, 'booths-algorithm')">Booth's Algorithm</div>
      <div class="tab" onclick="openTab(event, 'memory-viewer')">Memory Viewer</div>
    </div>

    <!-- Number Converter Tab -->
    <div id="number-converter" class="tab-content active">
      <form id="convertForm">
        <label for="inputNumber">Number</label>
        <input id="inputNumber" type="text" required placeholder="Enter number..." autocomplete="off" />
        <label for="fromBase">From Base</label>
        <div class="modern-dropdown" id="fromBaseWrapper">
          <div class="dropdown-selected" tabindex="0">
            <span class="selected-text">Decimal (10)</span>
            <svg class="dropdown-arrow" viewBox="0 0 24 24">
              <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <ul class="dropdown-list">
            <li data-value="2">Binary (2)</li>
            <li data-value="8">Octal (8)</li>
            <li data-value="10" class="selected">Decimal (10)</li>
            <li data-value="16">Hexadecimal (16)</li>
            <li data-value="custom">Custom</li>
          </ul>
          <input type="hidden" id="fromBase" value="10">
        </div>
        <input id="customFromBase" type="number" min="2" max="36" placeholder="Custom base (2-36)" style="display:none;" />
        <label for="toBase">To Base</label>
        <div class="modern-dropdown" id="toBaseWrapper">
          <div class="dropdown-selected" tabindex="0">
            <span class="selected-text">Binary (2)</span>
            <svg class="dropdown-arrow" viewBox="0 0 24 24">
              <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <ul class="dropdown-list">
            <li data-value="2" class="selected">Binary (2)</li>
            <li data-value="8">Octal (8)</li>
            <li data-value="10">Decimal (10)</li>
            <li data-value="16">Hexadecimal (16)</li>
            <li data-value="custom">Custom</li>
          </ul>
          <input type="hidden" id="toBase" value="2">
        </div>
        <input id="customToBase" type="number" min="2" max="36" placeholder="Custom base (2-36)" style="display:none;" />
        <button class="btn" type="submit">Convert</button>
      </form>
      <div id="result" class="result" style="display:none;"></div>
      <div id="steps" class="steps" style="display:none;"></div>
    </div>

    <!-- Code Converters Tab -->
    <div id="code-converters" class="tab-content">
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
        <!-- Grey Code Converter -->
        <div>
          <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">Grey Code ↔ Binary</h3>
          <label for="greyInput">Input</label>
          <input id="greyInput" type="text" placeholder="Enter Grey code or Binary..." autocomplete="off" />
          <label for="greyType">Input Type</label>
          <div class="modern-dropdown" id="greyTypeWrapper">
            <div class="dropdown-selected" tabindex="0">
              <span class="selected-text">Grey Code → Binary</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24">
                <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <ul class="dropdown-list">
              <li data-value="grey-to-binary" class="selected">Grey Code → Binary</li>
              <li data-value="binary-to-grey">Binary → Grey Code</li>
            </ul>
            <input type="hidden" id="greyType" value="grey-to-binary">
          </div>
          <button class="btn" onclick="convertGreyCode()">Convert</button>
          <div id="greyResult" class="result" style="display:none;"></div>
        </div>

        <!-- BCD Converter -->
        <div>
          <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">BCD ↔ Decimal</h3>
          <label for="bcdInput">Input</label>
          <input id="bcdInput" type="text" placeholder="Enter BCD or Decimal..." autocomplete="off" />
          <label for="bcdType">Input Type</label>
          <div class="modern-dropdown" id="bcdTypeWrapper">
            <div class="dropdown-selected" tabindex="0">
              <span class="selected-text">BCD → Decimal</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24">
                <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <ul class="dropdown-list">
              <li data-value="bcd-to-decimal" class="selected">BCD → Decimal</li>
              <li data-value="decimal-to-bcd">Decimal → BCD</li>
            </ul>
            <input type="hidden" id="bcdType" value="bcd-to-decimal">
          </div>
          <button class="btn" onclick="convertBCD()">Convert</button>
          <div id="bcdResult" class="result" style="display:none;"></div>
        </div>

        <!-- Excess-3 Converter -->
        <div style="grid-column: 1 / -1;">
          <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">Excess-3 ↔ Binary</h3>
          <label for="excess3Input">Input</label>
          <input id="excess3Input" type="text" placeholder="Enter Excess-3 or Binary..." autocomplete="off" />
          <label for="excess3Type">Input Type</label>
          <div class="modern-dropdown" id="excess3TypeWrapper">
            <div class="dropdown-selected" tabindex="0">
              <span class="selected-text">Excess-3 → Binary</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24">
                <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <ul class="dropdown-list">
              <li data-value="excess3-to-binary" class="selected">Excess-3 → Binary</li>
              <li data-value="binary-to-excess3">Binary → Excess-3</li>
            </ul>
            <input type="hidden" id="excess3Type" value="excess3-to-binary">
          </div>
          <button class="btn" onclick="convertExcess3()">Convert</button>
          <div id="excess3Result" class="result" style="display:none;"></div>
        </div>
      </div>
    </div>

    <!-- ASCII Converter Tab -->
    <div id="ascii-converter" class="tab-content">
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
        <div>
          <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">Text ↔ ASCII</h3>
          <label for="asciiInput">Input</label>
          <textarea id="asciiInput" rows="4" placeholder="Enter text or ASCII codes (space-separated)..." style="resize: vertical;"></textarea>
          <label for="asciiType">Conversion Type</label>
          <div class="modern-dropdown" id="asciiTypeWrapper">
            <div class="dropdown-selected" tabindex="0">
              <span class="selected-text">Text → ASCII Codes</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24">
                <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <ul class="dropdown-list">
              <li data-value="text-to-ascii" class="selected">Text → ASCII Codes</li>
              <li data-value="ascii-to-text">ASCII Codes → Text</li>
            </ul>
            <input type="hidden" id="asciiType" value="text-to-ascii">
          </div>
          <button class="btn" onclick="convertASCII()">Convert</button>
          <div id="asciiResult" class="result" style="display:none;"></div>
        </div>
        <div>
          <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">ASCII Table</h3>
          <div id="asciiTable" style="max-height: 300px; overflow-y: auto; border: 1px solid #e0e7ff; border-radius: 0.5rem; padding: 0.5rem; background: #f7fafd; font-size: 0.8rem;"></div>
        </div>
      </div>
    </div>

    <!-- Parity Calculator Tab -->
    <div id="parity-calculator" class="tab-content">
      <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">Parity Bit Calculator</h3>
      <label for="parityInput">Binary Data</label>
      <input id="parityInput" type="text" placeholder="Enter binary data (e.g., 1101)" autocomplete="off" />
      <label for="parityType">Parity Type</label>
      <div class="modern-dropdown" id="parityTypeWrapper">
        <div class="dropdown-selected" tabindex="0">
          <span class="selected-text">Even Parity</span>
          <svg class="dropdown-arrow" viewBox="0 0 24 24">
            <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <ul class="dropdown-list">
          <li data-value="even" class="selected">Even Parity</li>
          <li data-value="odd">Odd Parity</li>
        </ul>
        <input type="hidden" id="parityType" value="even">
      </div>
      <button class="btn" onclick="calculateParity()">Calculate Parity</button>
      <div id="parityResult" class="result" style="display:none;"></div>
    </div>

    <!-- Binary Arithmetic Tab -->
    <div id="binary-arithmetic" class="tab-content">
      <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">Binary Arithmetic Calculator</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div>
          <label for="binNum1">First Binary Number</label>
          <input id="binNum1" type="text" placeholder="Enter binary number..." autocomplete="off" />
        </div>
        <div>
          <label for="binNum2">Second Binary Number</label>
          <input id="binNum2" type="text" placeholder="Enter binary number..." autocomplete="off" />
        </div>
      </div>
      <label for="operation">Operation</label>
      <div class="modern-dropdown" id="operationWrapper">
        <div class="dropdown-selected" tabindex="0">
          <span class="selected-text">Addition (+)</span>
          <svg class="dropdown-arrow" viewBox="0 0 24 24">
            <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <ul class="dropdown-list">
          <li data-value="add" class="selected">Addition (+)</li>
          <li data-value="subtract">Subtraction (-)</li>
          <li data-value="multiply">Multiplication (×)</li>
          <li data-value="divide">Division (÷)</li>
        </ul>
        <input type="hidden" id="operation" value="add">
      </div>
      <button class="btn" onclick="calculateBinaryArithmetic()">Calculate</button>
      <div id="binaryArithmeticResult" class="result" style="display:none;"></div>
    </div>

    <!-- BCD Arithmetic Tab -->
    <div id="bcd-arithmetic" class="tab-content">
      <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">BCD Arithmetic</h3>
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
        <div>
          <label for="bcdArithNum1">First BCD Number</label>
          <input id="bcdArithNum1" type="text" placeholder="Enter BCD number..." autocomplete="off" />
        </div>
        <div>
          <label for="bcdArithNum2">Second BCD Number</label>
          <input id="bcdArithNum2" type="text" placeholder="Enter BCD number..." autocomplete="off" />
        </div>
      </div>
      <label for="bcdOperation">Operation</label>
      <div class="modern-dropdown" id="bcdOperationWrapper">
        <div class="dropdown-selected" tabindex="0">
          <span class="selected-text">BCD Addition</span>
          <svg class="dropdown-arrow" viewBox="0 0 24 24">
            <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </div>
        <ul class="dropdown-list">
          <li data-value="add" class="selected">BCD Addition</li>
          <li data-value="subtract">BCD Subtraction</li>
        </ul>
        <input type="hidden" id="bcdOperation" value="add">
      </div>
      <button class="btn" onclick="calculateBCDArithmetic()">Calculate</button>
      <div id="bcdArithmeticResult" class="result" style="display:none;"></div>
    </div>

    <!-- 8086 Stack Calculator Tab -->
    <div id="8086-stack" class="tab-content">
      <div class="stack-calculator-container">
        <!-- Header with 8086 indicator -->
        <div class="stack-header">
          <div class="processor-indicator">8086</div>
          <h3 class="stack-title">8086 STACK CALCULATOR</h3>
          <div class="stack-subtitle">Microprocessor-Based Computing System</div>
        </div>

        <div class="stack-main-layout" id="stackMainLayout">
          <!-- Top section - Calculator and Info -->
          <div class="top-section">
            <!-- Left side - Calculator -->
          <div class="calculator-section">
            <!-- System Status -->
            <div class="connection-status">
              <span class="status-indicator connected"></span>
              <span class="status-text">8086 Ready</span>
              <div class="stack-size-info">Stack Size: 
                <span class="size-value" id="stackSizeDisplay">0</span>
              </div>
            </div>

            <!-- Display Register -->
            <div class="display-register">
              <div class="register-content" id="displayRegister">0</div>
              <button class="clear-display-btn" onclick="clearDisplay()">✓</button>
            </div>

            <!-- Stack Memory Display -->
            <div class="stack-memory">
              <div class="stack-header-text">
                STACK MEMORY
                <button class="clear-stack-btn" onclick="clearStack()">Clear Stack</button>
              </div>
              <div class="stack-content" id="stackContent">
                <div class="stack-empty-message">Stack Empty</div>
              </div>
            </div>

            <!-- Keypad -->
            <div class="keypad">
              <!-- Row 1 -->
              <button class="key number-key" onclick="inputNumber('7')">7</button>
              <button class="key number-key" onclick="inputNumber('8')">8</button>
              <button class="key number-key" onclick="inputNumber('9')">9</button>
              <button class="key operation-key add" onclick="inputOperation('+')">+</button>
              <button class="key stack-key push" onclick="pushToStack()">PUSH</button>

              <!-- Row 2 -->
              <button class="key number-key" onclick="inputNumber('4')">4</button>
              <button class="key number-key" onclick="inputNumber('5')">5</button>
              <button class="key number-key" onclick="inputNumber('6')">6</button>
              <button class="key operation-key subtract" onclick="inputOperation('-')">-</button>
              <button class="key stack-key pop" onclick="popFromStack()">POP</button>

              <!-- Row 3 -->
              <button class="key number-key" onclick="inputNumber('1')">1</button>
              <button class="key number-key" onclick="inputNumber('2')">2</button>
              <button class="key number-key" onclick="inputNumber('3')">3</button>
              <button class="key operation-key multiply" onclick="inputOperation('*')">×</button>
              <button class="key stack-key peek" onclick="peekStack()">PEEK</button>

              <!-- Row 4 -->
              <button class="key clear-key" onclick="clearAll()">C</button>
              <button class="key number-key zero" onclick="inputNumber('0')">0</button>
              <button class="key backspace-key" onclick="backspace()">⌫</button>
              <button class="key operation-key divide" onclick="inputOperation('/')">/</button>
              <button class="key operation-key equals" onclick="calculateResult()">=</button>

              <!-- Row 5 -->
              <button class="key operation-key mod" onclick="inputOperation('MOD')">MOD</button>
              <button class="key" style="background: transparent; border: none;"></button>
              <button class="key" style="background: transparent; border: none;"></button>
              <button class="key" style="background: transparent; border: none;"></button>
              <button class="key" style="background: transparent; border: none;"></button>
            </div>
          </div>

          <!-- Right side - Architecture Info -->
          <div class="architecture-info">
            <h4>8086 PROCESSOR STATUS</h4>
            
            <!-- CPU Registers -->
            <div class="registers-section">
              <h5>CPU REGISTERS</h5>
              <div class="registers-grid">
                <div class="register-item">
                  <span class="reg-name">AX:</span>
                  <span class="reg-value" id="regAX">0</span>
                </div>
                <div class="register-item">
                  <span class="reg-name">BX:</span>
                  <span class="reg-value" id="regBX">0</span>
                </div>
                <div class="register-item">
                  <span class="reg-name">CX:</span>
                  <span class="reg-value" id="regCX">0</span>
                </div>
                <div class="register-item">
                  <span class="reg-name">DX:</span>
                  <span class="reg-value" id="regDX">0</span>
                </div>
                <div class="register-item">
                  <span class="reg-name">SP:</span>
                  <span class="reg-value" id="regSP">50</span>
                </div>
              </div>
            </div>

            <!-- Flag Registers -->
            <div class="flags-section">
              <h5>FLAGS REGISTER</h5>
              <div class="flags-grid">
                <div class="flag-item" id="flagZero">
                  <span class="flag-name">ZF</span>
                  <span class="flag-status">0</span>
                </div>
                <div class="flag-item" id="flagCarry">
                  <span class="flag-name">CF</span>
                  <span class="flag-status">0</span>
                </div>
                <div class="flag-item" id="flagSign">
                  <span class="flag-name">SF</span>
                  <span class="flag-status">0</span>
                </div>
                <div class="flag-item" id="flagOverflow">
                  <span class="flag-name">OF</span>
                  <span class="flag-status">0</span>
                </div>
                <div class="flag-item" id="flagParity">
                  <span class="flag-name">PF</span>
                  <span class="flag-status">0</span>
                </div>
                <div class="flag-item" id="flagAuxiliary">
                  <span class="flag-name">AF</span>
                  <span class="flag-status">0</span>
                </div>
              </div>
            </div>

            <!-- Performance Metrics -->
            <div class="performance-section">
              <h5>PERFORMANCE METRICS</h5>
              <div class="metrics-grid">
                <div class="metric-item">
                  <span class="metric-label">Operations:</span>
                  <span class="metric-value" id="totalOperations">0</span>
                </div>
                <div class="metric-item">
                  <span class="metric-label">Stack Usage:</span>
                  <span class="metric-value" id="stackUsage">0%</span>
                </div>
                <div class="metric-item">
                  <span class="metric-label">Stack Size:</span>
                  <span class="metric-value" id="stackElementCount">0/50</span>
                </div>
                <div class="metric-item">
                  <span class="metric-label">Exec Time:</span>
                  <span class="metric-value" id="execTime">0ms</span>
                </div>
              </div>
            </div>

            <!-- Assembly Code Generator -->
            <div class="assembly-section">
              <h5>ASSEMBLY CODE
                <button class="copy-asm-btn" onclick="copyAssemblyCode()" title="Copy Assembly Code">📋</button>
                <button class="clear-asm-btn" onclick="clearAssemblyCode()" title="Clear Code">🗑️</button>
              </h5>
              <div class="assembly-code" id="assemblyCode">
                <div class="asm-line">; 8086 Assembly Code</div>
                <div class="asm-line">; Operations will appear here</div>
              </div>
            </div>

            </div>

          </div>

          <!-- Middle section - Operation History -->
          <div class="history-section">
            <h4>OPERATION HISTORY</h4>
            <div class="history-content-expanded" id="operationHistory">
              <div class="history-item">System ready</div>
            </div>
          </div>

          <!-- Memory Viewer Section -->
          <div class="memory-viewer-section-inline">
            <h4>💾 MEMORY VIEWER</h4>
            <div class="memory-subtitle-inline">Stack Memory Visualization (FFFFH - FFF0H)</div>
            
            <div class="memory-grid-simple">
              <!-- Memory cells will be dynamically generated here -->
            </div>
            
            <div class="memory-legend-simple">
              <div class="legend-item-simple">
                <span class="legend-dot sp-dot"></span>
                <span>Stack Pointer (SP)</span>
              </div>
              <div class="legend-item-simple">
                <span class="legend-dot occupied-dot"></span>
                <span>Occupied</span>
              </div>
              <div class="legend-item-simple">
                <span class="legend-dot empty-dot"></span>
                <span>Empty</span>
              </div>
            </div>
          </div>

          <!-- Stack Animation Section -->
          <div class="stack-animation-section" id="stackAnimationSection">
            <div class="animation-header">
              <h4>🎬 STACK ANIMATION</h4>
              <div class="animation-subtitle">Real-time PUSH/POP Operations Visualization</div>
            </div>

            <!-- Animation Controls -->
            <div class="animation-controls" id="animationControls">
              <div class="control-group">
                <button class="anim-control-btn play-btn" onclick="playAnimation()" id="playBtn">
                  <span class="btn-icon">▶️</span>
                  <span class="btn-text">Play</span>
                </button>
                <button class="anim-control-btn pause-btn" onclick="pauseAnimation()" id="pauseBtn" style="display: none;">
                  <span class="btn-icon">⏸️</span>
                  <span class="btn-text">Pause</span>
                </button>
                <button class="anim-control-btn" onclick="stepForward()">
                  <span class="btn-icon">⏭️</span>
                  <span class="btn-text">Step</span>
                </button>
                <button class="anim-control-btn" onclick="resetAnimation()">
                  <span class="btn-icon">🔄</span>
                  <span class="btn-text">Reset</span>
                </button>
              </div>

              <div class="speed-control">
                <label for="animSpeed">Speed:</label>
                <select id="animSpeed" onchange="changeAnimationSpeed(this.value)">
                  <option value="0.5">0.5x</option>
                  <option value="1" selected>1x</option>
                  <option value="2">2x</option>
                </select>
              </div>

              <div class="animation-status">
                <span class="status-label">Queue:</span>
                <span class="status-value" id="queueCount">0</span>
                <span class="status-label">| Current:</span>
                <span class="status-value" id="currentOperation">None</span>
              </div>
            </div>

            <!-- Animation Canvas -->
            <div class="animation-canvas" id="animationCanvas">
              <div class="canvas-header">
                <div class="memory-addresses">
                  <span class="addr-label">Memory Addresses</span>
                </div>
                <div class="stack-label">Stack Contents</div>
                <div class="sp-label">SP →</div>
              </div>

              <div class="stack-visual-container" id="stackVisualContainer">
                <!-- Stack blocks will be rendered here -->
                <div class="stack-empty-state">
                  <span class="empty-icon">📭</span>
                  <p>Stack is empty. Perform PUSH operations to see animation.</p>
                </div>
              </div>

              <!-- Animated Data Block (for PUSH/POP animations) -->
              <div class="animated-data-block" id="animatedDataBlock" style="display: none;">
                <div class="data-value">0</div>
              </div>
            </div>

            <!-- Animation Info Panel -->
            <div class="animation-info-panel">
              <div class="info-card">
                <div class="info-icon">📊</div>
                <div class="info-content">
                  <h5>Total Operations</h5>
                  <p class="info-value" id="animTotalOps">0</p>
                </div>
              </div>
              <div class="info-card">
                <div class="info-icon">⬆️</div>
                <div class="info-content">
                  <h5>PUSH Count</h5>
                  <p class="info-value" id="animPushCount">0</p>
                </div>
              </div>
              <div class="info-card">
                <div class="info-icon">⬇️</div>
                <div class="info-content">
                  <h5>POP Count</h5>
                  <p class="info-value" id="animPopCount">0</p>
                </div>
              </div>
              <div class="info-card">
                <div class="info-icon">📏</div>
                <div class="info-content">
                  <h5>Stack Height</h5>
                  <p class="info-value" id="animStackHeight">0</p>
                </div>
              </div>
            </div>
          </div>

          <!-- Bottom section - Instructions -->
          <div class="instructions-section">
            <h4>8086 STACK OPERATIONS GUIDE</h4>
            <div class="instructions-grid">
              <div class="instruction-card">
                <div class="step-number">1</div>
                <div class="step-content">
                  <h5>Enter Number</h5>
                  <p>Input a number using the keypad (e.g., 5)</p>
                </div>
              </div>

              <div class="instruction-card">
                <div class="step-number">2</div>
                <div class="step-content">
                  <h5>Push to Stack</h5>
                  <p>Press <strong>PUSH</strong> to add number to stack</p>
                </div>
              </div>

              <div class="instruction-card">
                <div class="step-number">3</div>
                <div class="step-content">
                  <h5>Repeat Process</h5>
                  <p>Enter second number and <strong>PUSH</strong> again</p>
                </div>
              </div>

              <div class="instruction-card">
                <div class="step-number">4</div>
                <div class="step-content">
                  <h5>Select Operation</h5>
                  <p>Choose arithmetic operation (+, -, ×, /, MOD)</p>
                </div>
              </div>

              <div class="instruction-card">
                <div class="step-number">5</div>
                <div class="step-content">
                  <h5>View Result</h5>
                  <p>Use <strong>PEEK</strong> to see result or <strong>POP</strong> to retrieve</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <div class="footer-info">
          Academic Project - Microprocessor & Interfacing Lab<br>
          8086 Architecture - Stack Operations - Assembly Language
        </div>
      </div>
    </div>

    <!-- Signed Numbers Tab -->
    <div id="signed-numbers" class="tab-content">
      <h3 style="color: #6366f1; margin-bottom: 0.5rem; font-size: 1rem;">Signed Number Representations</h3>
      <p style="color: #64748b; margin-bottom: 1rem; font-size: 0.85rem;">
        Explore how negative numbers are represented using Sign-Magnitude, 1's Complement, and 2's Complement
      </p>

      <div style="display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 0.75rem; max-width: 100%;">
      <!-- Sign-Magnitude Card -->
      <div>
        <h3 style="color: #6366f1; margin-bottom: 0.8rem; font-size: 1rem;">Sign-Magnitude</h3>
        <label for="signMagInputType">Input Type</label>
        <div class="modern-dropdown" id="signMagInputTypeWrapper">
          <div class="dropdown-selected" tabindex="0">
            <span class="selected-text">Decimal</span>
            <svg class="dropdown-arrow" viewBox="0 0 24 24">
              <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <ul class="dropdown-list">
            <li data-value="decimal" class="selected">Decimal</li>
            <li data-value="binary">Binary (8-bit)</li>
          </ul>
          <input type="hidden" id="signMagInputType" value="decimal">
        </div>
        <label for="signMagInput">Input</label>
        <input id="signMagInput" type="text" placeholder="Enter number" autocomplete="off" />
        <button class="btn" onclick="convertSignMagnitude()">Get Sign-Magnitude</button>
        <div id="signMagResult" class="result" style="display:none;"></div>
        <div id="signMagSteps" class="steps" style="display:none;"></div>
      </div>

      <!-- 1's Complement Card -->
      <div>
        <h3 style="color: #6366f1; margin-bottom: 0.8rem; font-size: 1rem;">1's Complement</h3>
        <label for="onesCompInputType">Input Type</label>
        <div class="modern-dropdown" id="onesCompInputTypeWrapper">
          <div class="dropdown-selected" tabindex="0">
            <span class="selected-text">Decimal</span>
            <svg class="dropdown-arrow" viewBox="0 0 24 24">
              <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <ul class="dropdown-list">
            <li data-value="decimal" class="selected">Decimal</li>
            <li data-value="binary">Binary (8-bit)</li>
          </ul>
          <input type="hidden" id="onesCompInputType" value="decimal">
        </div>
        <label for="onesCompInput">Input</label>
        <input id="onesCompInput" type="text" placeholder="Enter number" autocomplete="off" />
        <button class="btn" onclick="convertOnesComplement()">Get 1's Complement</button>
        <div id="onesCompResult" class="result" style="display:none;"></div>
        <div id="onesCompSteps" class="steps" style="display:none;"></div>
      </div>

      <!-- 2's Complement Card -->
      <div>
        <h3 style="color: #6366f1; margin-bottom: 0.8rem; font-size: 1rem;">2's Complement ⭐</h3>
        <label for="twosCompInputType">Input Type</label>
        <div class="modern-dropdown" id="twosCompInputTypeWrapper">
          <div class="dropdown-selected" tabindex="0">
            <span class="selected-text">Decimal</span>
            <svg class="dropdown-arrow" viewBox="0 0 24 24">
              <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </div>
          <ul class="dropdown-list">
            <li data-value="decimal" class="selected">Decimal</li>
            <li data-value="binary">Binary (8-bit)</li>
          </ul>
          <input type="hidden" id="twosCompInputType" value="decimal">
        </div>
        <label for="twosCompInput">Input</label>
        <input id="twosCompInput" type="text" placeholder="Enter number" autocomplete="off" />
        <button class="btn" onclick="convertTwosComplement()">Get 2's Complement</button>
        <div id="twosCompResult" class="result" style="display:none;"></div>
        <div id="twosCompSteps" class="steps" style="display:none;"></div>
      </div>
    </div>

    <!-- Why 2's Complement Info -->
    <div style="margin-top: 1.5rem; background: #f7fafd; border-radius: 0.8rem; padding: 1rem; border: 1px solid #e5eaf2;">
      <h4 style="color: #6366f1; margin-bottom: 0.75rem; font-size: 0.9rem;">⭐ Why 2's Complement?</h4>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 0.6rem; font-size: 0.8rem; color: #374151;">
        <div style="background: white; padding: 0.6rem; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
          <div style="font-weight: 700; margin-bottom: 0.2rem; font-size: 0.8rem;">✅ Single Zero</div>
          <div style="color: #6b7280; font-size: 0.75rem;">No separate +0 and -0</div>
        </div>
        <div style="background: white; padding: 0.6rem; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
          <div style="font-weight: 700; margin-bottom: 0.2rem; font-size: 0.8rem;">⚡ Fast Arithmetic</div>
          <div style="color: #6b7280; font-size: 0.75rem;">Same circuit for all operations</div>
        </div>
        <div style="background: white; padding: 0.6rem; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
          <div style="font-weight: 700; margin-bottom: 0.2rem; font-size: 0.8rem;">📈 Extra Value</div>
          <div style="color: #6b7280; font-size: 0.75rem;">Can represent -128</div>
        </div>
        <div style="background: white; padding: 0.6rem; border-radius: 0.5rem; border: 1px solid #e5e7eb;">
          <div style="font-weight: 700; margin-bottom: 0.2rem; font-size: 0.8rem;">🏭 Industry Standard</div>
          <div style="color: #6b7280; font-size: 0.75rem;">Used in all modern CPUs</div>
        </div>
      </div>
    </div>
    </div>  <!-- Close signed-numbers tab-content -->

    <!-- IEEE 754 Floating-Point Tab -->
    <div id="ieee754" class="tab-content">
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem;">
        <!-- Single Precision (32-bit) -->
        <div>
          <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">IEEE 754 Single (32-bit)</h3>
          <label for="singleInput">Input</label>
          <input id="singleInput" type="text" placeholder="Enter decimal or 32-bit binary..." autocomplete="off" />
          <label for="singleInputType">Conversion Type</label>
          <div class="modern-dropdown" id="singleInputTypeWrapper">
            <div class="dropdown-selected" tabindex="0">
              <span class="selected-text">Decimal → IEEE 754</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24">
                <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <ul class="dropdown-list">
              <li data-value="decimal" class="selected">Decimal → IEEE 754</li>
              <li data-value="binary">IEEE 754 → Decimal</li>
            </ul>
            <input type="hidden" id="singleInputType" value="decimal">
          </div>
          <button class="btn" onclick="convertSinglePrecision()">Convert</button>
          <div id="singleResult" class="result" style="display:none;"></div>
          <div id="singleSteps" class="steps" style="display:none;"></div>
        </div>

        <!-- Double Precision (64-bit) -->
        <div>
          <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">IEEE 754 Double (64-bit)</h3>
          <label for="doubleInput">Input</label>
          <input id="doubleInput" type="text" placeholder="Enter decimal or 64-bit binary..." autocomplete="off" />
          <label for="doubleInputType">Conversion Type</label>
          <div class="modern-dropdown" id="doubleInputTypeWrapper">
            <div class="dropdown-selected" tabindex="0">
              <span class="selected-text">Decimal → IEEE 754</span>
              <svg class="dropdown-arrow" viewBox="0 0 24 24">
                <path d="M7 10l5 5 5-5" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            <ul class="dropdown-list">
              <li data-value="decimal" class="selected">Decimal → IEEE 754</li>
              <li data-value="binary">IEEE 754 → Decimal</li>
            </ul>
            <input type="hidden" id="doubleInputType" value="decimal">
          </div>
          <button class="btn" onclick="convertDoublePrecision()">Convert</button>
          <div id="doubleResult" class="result" style="display:none;"></div>
          <div id="doubleSteps" class="steps" style="display:none;"></div>
        </div>
      </div>
    </div>  <!-- Close ieee754 tab-content -->

    <!-- Booth's Algorithm Tab -->
    <div id="booths-algorithm" class="tab-content">
      <h3 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem;">Booth's Multiplication Algorithm</h3>
      
      <!-- Input Section -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem;">
        <div>
          <label for="boothMultiplicand">Multiplicand (M)</label>
          <input id="boothMultiplicand" type="text" placeholder="Enter number (e.g., 7)" autocomplete="off" />
        </div>
        <div>
          <label for="boothMultiplier">Multiplier (Q)</label>
          <input id="boothMultiplier" type="text" placeholder="Enter number (e.g., 3)" autocomplete="off" />
        </div>
      </div>

      <div style="margin-bottom: 1.5rem;">
        <label for="boothBitWidth">Bit Width</label>
        <select id="boothBitWidth" style="width: 100%; padding: 0.6rem; border-radius: 0.5rem; border: 1px solid #e5e7eb; font-family: 'Poppins', sans-serif;">
          <option value="4">4-bit</option>
          <option value="8" selected>8-bit</option>
          <option value="16">16-bit</option>
        </select>
      </div>

      <!-- Control Buttons -->
      <div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
        <button class="btn" onclick="calculateBooths()" style="flex: 1; min-width: 130px; font-size: 1rem; padding: 0.85rem;">📊 Show Overview</button>
        <button class="btn" id="navigateStepsBtn" onclick="navigateSteps()" style="flex: 1; min-width: 130px; display: none; font-size: 1rem; padding: 0.85rem;">▶️ Navigate Steps</button>
        <button class="btn" onclick="resetBooths()" style="flex: 1; min-width: 130px; background: linear-gradient(90deg, #ef4444 0%, #dc2626 100%); font-size: 1rem; padding: 0.85rem;">🔄 Reset</button>
      </div>
      
      <!-- Step Navigation Controls (shown during navigation) -->
      <div id="stepNavControls" style="display: none; background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%); padding: 1.25rem; border-radius: 1.5rem; margin-bottom: 1.5rem; box-shadow: 0 4px 24px 0 rgba(99,102,241,0.25); border: 2px solid rgba(255,255,255,0.2); scroll-margin-top: 10px;">
        <div style="display: flex; justify-content: space-between; align-items: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;">
          <button onclick="previousStep()" id="prevBtn" class="nav-step-btn" style="background: white; color: #6366f1; border: none; border-radius: 1rem; padding: 0.75rem 1.5rem; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 8px rgba(0,0,0,0.1); font-family: 'Poppins', sans-serif; min-width: 120px;">⬅️ PREVIOUS</button>
          <div style="text-align: center; color: white; font-weight: 700; font-family: 'Poppins', sans-serif;">
            <div style="font-size: 0.8rem; opacity: 0.95; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.25rem;">Step Navigation</div>
            <div style="font-size: 1.5rem; font-weight: 900; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">
              <span id="navCurrentStep">0</span> <span style="opacity: 0.7;">/</span> <span id="navTotalSteps">0</span>
            </div>
          </div>
          <button onclick="nextStep()" id="nextBtn" class="nav-step-btn" style="background: white; color: #6366f1; border: none; border-radius: 1rem; padding: 0.75rem 1.5rem; font-size: 1rem; font-weight: 700; cursor: pointer; transition: all 0.2s; box-shadow: 0 2px 8px rgba(0,0,0,0.1); font-family: 'Poppins', sans-serif; min-width: 120px;">NEXT ➡️</button>
        </div>
        <div style="background: rgba(255,255,255,0.25); height: 10px; border-radius: 1rem; overflow: hidden; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);">
          <div id="progressBar" style="background: linear-gradient(90deg, #10b981 0%, #059669 100%); height: 100%; width: 0%; transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1); box-shadow: 0 0 10px rgba(16, 185, 129, 0.5);"></div>
        </div>
      </div>

      <!-- Result Display -->
      <div id="boothResult" style="display:none; background: linear-gradient(135deg, #f0fdf4 0%, #d1fae5 100%); padding: 1.5rem; border-radius: 1.2rem; border: 3px solid #10b981; margin-bottom: 1.5rem; box-shadow: 0 6px 20px rgba(16, 185, 129, 0.2); animation: slideInUp 0.5s ease-out;">
        <h4 style="color: #10b981; margin-bottom: 1rem; font-size: 1.2rem; font-weight: 800; font-family: 'Poppins', sans-serif; display: flex; align-items: center; gap: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px;">
          <span style="font-size: 1.5rem; animation: bounce 2s infinite;">🎉</span> Final Result
        </h4>
        <div style="font-family: 'Poppins', sans-serif; background: white; padding: 1.25rem; border-radius: 0.75rem; box-shadow: inset 0 2px 6px rgba(0,0,0,0.05);">
          <span id="boothFinalResult"></span>
        </div>
      </div>

      <!-- Registers Display -->
      <div id="boothRegisters" style="display:none; margin-bottom: 1.5rem; animation: slideInUp 0.5s ease-out;">
        <h4 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 700; font-family: 'Poppins', sans-serif;">📊 Current Registers</h4>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem;">
          <div class="register-card" id="registerACard" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); padding: 1.25rem; border-radius: 1.2rem; border: 2px solid #fbbf24; box-shadow: 0 4px 12px rgba(251, 191, 36, 0.2); transition: all 0.3s ease; position: relative; overflow: hidden;">
            <div style="position: absolute; top: -20px; right: -20px; font-size: 4rem; opacity: 0.1;">🟨</div>
            <div style="font-size: 0.75rem; color: #92400e; font-weight: 700; margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Poppins', sans-serif;">
              Accumulator (A)
            </div>
            <div id="registerA" style="font-family: 'Courier New', monospace; font-size: 1.15rem; color: #78350f; font-weight: 700; letter-spacing: 0.15rem; text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.7); border-radius: 0.75rem; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); position: relative; z-index: 1;"></div>
          </div>
          <div class="register-card" id="registerQCard" style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); padding: 1.25rem; border-radius: 1.2rem; border: 2px solid #3b82f6; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2); transition: all 0.3s ease; position: relative; overflow: hidden;">
            <div style="position: absolute; top: -20px; right: -20px; font-size: 4rem; opacity: 0.1;">🟦</div>
            <div style="font-size: 0.75rem; color: #1e40af; font-weight: 700; margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Poppins', sans-serif;">
              Multiplier (Q)
            </div>
            <div id="registerQ" style="font-family: 'Courier New', monospace; font-size: 1.15rem; color: #1e3a8a; font-weight: 700; letter-spacing: 0.15rem; text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.7); border-radius: 0.75rem; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); position: relative; z-index: 1;"></div>
          </div>
          <div class="register-card" id="registerQ1Card" style="background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); padding: 1.25rem; border-radius: 1.2rem; border: 2px solid #ec4899; box-shadow: 0 4px 12px rgba(236, 72, 153, 0.2); transition: all 0.3s ease; position: relative; overflow: hidden;">
            <div style="position: absolute; top: -20px; right: -20px; font-size: 4rem; opacity: 0.1;">🟪</div>
            <div style="font-size: 0.75rem; color: #9f1239; font-weight: 700; margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Poppins', sans-serif;">
              Extra Bit (Q-1)
            </div>
            <div id="registerQ1" style="font-family: 'Courier New', monospace; font-size: 1.15rem; color: #831843; font-weight: 700; letter-spacing: 0.15rem; text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.7); border-radius: 0.75rem; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); position: relative; z-index: 1;"></div>
          </div>
          <div class="register-card" id="registerMCard" style="background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%); padding: 1.25rem; border-radius: 1.2rem; border: 2px solid #6366f1; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2); transition: all 0.3s ease; position: relative; overflow: hidden;">
            <div style="position: absolute; top: -20px; right: -20px; font-size: 4rem; opacity: 0.1;">🔷</div>
            <div style="font-size: 0.75rem; color: #4338ca; font-weight: 700; margin-bottom: 0.75rem; text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Poppins', sans-serif;">
              Multiplicand (M)
            </div>
            <div id="registerM" style="font-family: 'Courier New', monospace; font-size: 1.15rem; color: #3730a3; font-weight: 700; letter-spacing: 0.15rem; text-align: center; padding: 0.75rem; background: rgba(255,255,255,0.7); border-radius: 0.75rem; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1); position: relative; z-index: 1;"></div>
          </div>
        </div>
      </div>
      
      <style>
        @keyframes slideInUp {
          from {
            opacity: 0;
            transform: translateY(20px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }
        @keyframes pulse {
          0%, 100% {
            transform: scale(1);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
          }
          50% {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(99, 102, 241, 0.4);
          }
        }
        .register-card:hover {
          transform: translateY(-4px) scale(1.02);
          box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3) !important;
        }
        .register-highlight {
          animation: pulse 1s ease-in-out 2;
        }
        .nav-step-btn:hover:not(:disabled) {
          background: #f0f9ff !important;
          color: #1e40af !important;
          transform: translateY(-2px) scale(1.05);
          box-shadow: 0 4px 16px rgba(59, 130, 246, 0.4) !important;
        }
        .nav-step-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
          transform: none !important;
        }
        #prevBtn:disabled, #nextBtn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
          transform: none !important;
        }
      </style>

      <!-- Current Step Info -->
      <div id="boothStepInfo" style="display:none; background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); padding: 1.5rem; border-radius: 1.2rem; border: 2px solid #3b82f6; margin-bottom: 1.5rem; box-shadow: 0 4px 16px rgba(59, 130, 246, 0.15); animation: slideInUp 0.5s ease-out;">
        <h4 style="color: #3b82f6; margin-bottom: 1rem; font-size: 1.1rem; display: flex; align-items: center; gap: 0.75rem; font-family: 'Poppins', sans-serif; font-weight: 700;">
          <span style="font-size: 1.5rem; animation: bounce 2s infinite;">💡</span> 
          <span>Current Step:</span>
          <span id="currentStepNum" style="background: linear-gradient(90deg, #3b82f6 0%, #2563eb 100%); color: white; padding: 0.4rem 1rem; border-radius: 0.75rem; font-size: 1.2rem; box-shadow: 0 2px 8px rgba(59, 130, 246, 0.3); font-weight: 800;">0</span>
        </h4>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 1rem;">
          <div style="background: white; padding: 1rem; border-radius: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; flex-direction: column; gap: 0.5rem;">
            <div style="color: #1e40af; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Poppins', sans-serif;">Q Q-1 Bits</div>
            <div id="currentBits" style="font-family: 'Courier New', monospace; font-weight: 800; font-size: 1.5rem; color: #3b82f6; background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%); padding: 0.5rem; border-radius: 0.5rem; text-align: center; border: 2px solid #3b82f6;"></div>
          </div>
          <div style="background: white; padding: 1rem; border-radius: 0.75rem; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; flex-direction: column; gap: 0.5rem;">
            <div style="color: #047857; font-size: 0.75rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; font-family: 'Poppins', sans-serif;">Operation</div>
            <div id="currentOperation" style="font-weight: 700; color: #059669; font-size: 1.1rem; font-family: 'Poppins', sans-serif; text-align: center;"></div>
          </div>
        </div>
        <div style="background: white; padding: 1.25rem; border-radius: 0.75rem; border-left: 5px solid #3b82f6; box-shadow: 0 2px 8px rgba(0,0,0,0.05);">
          <div style="font-size: 0.7rem; color: #6366f1; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; margin-bottom: 0.5rem; font-family: 'Poppins', sans-serif;">📝 Step Explanation</div>
          <div id="stepExplanation" style="font-size: 0.95rem; color: #1e3a8a; line-height: 1.7; font-family: 'Poppins', sans-serif;"></div>
        </div>
      </div>
      
      <style>
        @keyframes bounce {
          0%, 100% { transform: translateY(0); }
          50% { transform: translateY(-5px); }
        }
      </style>

      <!-- Stack Animation Styles -->
      <style>
        /* Stack Animation Section */
        .stack-animation-section {
          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
          padding: 2rem;
          border-radius: 1.2rem;
          margin: 2rem 0;
          border: 2px solid #e0e7ff;
          box-shadow: 0 8px 24px rgba(99, 102, 241, 0.08);
        }

        .animation-header {
          text-align: center;
          margin-bottom: 2rem;
        }

        .animation-header h4 {
          color: #6366f1;
          font-family: 'Poppins', sans-serif;
          font-size: 1.5rem;
          font-weight: 700;
          margin-bottom: 0.5rem;
          display: flex;
          align-items: center;
          justify-content: center;
          gap: 0.5rem;
        }

        .animation-subtitle {
          color: #64748b;
          font-size: 0.95rem;
          margin-bottom: 1rem;
        }

        /* Animation Controls */
        .animation-controls {
          background: white;
          padding: 1.5rem;
          border-radius: 1rem;
          margin-bottom: 1.5rem;
          border: 2px solid #e5e7eb;
          display: flex;
          align-items: center;
          gap: 1rem;
          flex-wrap: wrap;
        }

        .control-group {
          display: flex;
          gap: 0.75rem;
          flex: 1;
          min-width: 280px;
        }

        .anim-control-btn {
          background: white;
          border: 2px solid #e5e7eb;
          padding: 0.7rem 1.2rem;
          border-radius: 0.7rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
          display: flex;
          align-items: center;
          gap: 0.5rem;
          color: #475569;
        }

        .anim-control-btn:hover {
          background: #f8fafc;
          border-color: #6366f1;
          color: #6366f1;
          transform: translateY(-1px);
        }

        .anim-control-btn.play-btn:hover {
          background: #dcfce7;
          border-color: #10b981;
          color: #10b981;
        }

        .anim-control-btn.pause-btn:hover {
          background: #fef3c7;
          border-color: #f59e0b;
          color: #f59e0b;
        }

        .speed-control {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem;
          color: #475569;
        }

        .speed-control select {
          padding: 0.5rem 1rem;
          border: 2px solid #e5e7eb;
          border-radius: 0.5rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .speed-control select:hover {
          border-color: #6366f1;
        }

        .animation-status {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem;
          padding: 0.7rem 1.2rem;
          background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
          border-radius: 0.7rem;
          border: 2px solid #bfdbfe;
        }

        .status-label {
          color: #64748b;
          font-weight: 600;
        }

        .status-value {
          color: #3b82f6;
          font-weight: 700;
        }

        /* Animation Canvas */
        .animation-canvas {
          background: white;
          padding: 2rem;
          border-radius: 1rem;
          margin-bottom: 1.5rem;
          border: 2px solid #e5e7eb;
          min-height: 400px;
          position: relative;
          overflow: hidden;
        }

        .canvas-header {
          display: grid;
          grid-template-columns: 120px 1fr 80px;
          gap: 1rem;
          margin-bottom: 1.5rem;
          padding-bottom: 1rem;
          border-bottom: 2px solid #e5e7eb;
          font-family: 'Poppins', sans-serif;
          font-size: 0.85rem;
          font-weight: 700;
          color: #64748b;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .stack-visual-container {
          min-height: 300px;
          position: relative;
        }

        .stack-empty-state {
          text-align: center;
          padding: 3rem 1rem;
          color: #94a3b8;
        }

        .empty-icon {
          font-size: 4rem;
          display: block;
          margin-bottom: 1rem;
          animation: bounce 2s infinite;
        }

        .stack-empty-state p {
          font-family: 'Poppins', sans-serif;
          font-size: 1rem;
        }

        /* Stack Block Styles */
        .stack-block {
          display: grid;
          grid-template-columns: 120px 1fr 80px;
          gap: 1rem;
          margin-bottom: 0.75rem;
          transition: all 0.3s ease;
        }

        .stack-block.active {
          transform: scale(1.02);
        }

        .memory-addr {
          background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
          padding: 0.9rem 1rem;
          border-radius: 0.6rem;
          font-family: 'Courier New', monospace;
          font-size: 0.9rem;
          font-weight: 700;
          color: #475569;
          text-align: center;
          border: 2px solid #cbd5e1;
        }

        .stack-data {
          background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
          padding: 0.9rem 1.2rem;
          border-radius: 0.6rem;
          font-family: 'Courier New', monospace;
          font-size: 1.1rem;
          font-weight: 700;
          color: #3b82f6;
          text-align: center;
          border: 2px solid #93c5fd;
          position: relative;
          overflow: hidden;
        }

        .stack-data::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
          transition: left 0.5s ease;
        }

        .stack-data.push-anim {
          animation: pushSlide 0.5s ease-out;
          background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
          border-color: #86efac;
        }

        .stack-data.push-anim::before {
          left: 100%;
        }

        .stack-data.pop-anim {
          animation: popSlide 0.5s ease-out;
          background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
          border-color: #fca5a5;
        }

        .sp-indicator {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
          padding: 0.9rem 1rem;
          border-radius: 0.6rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.85rem;
          font-weight: 700;
          color: #92400e;
          text-align: center;
          border: 2px solid #fbbf24;
          display: flex;
          align-items: center;
          justify-content: center;
          animation: pulse 1s ease-in-out 2;
        }

        .sp-indicator.active {
          animation: pulse 1s ease-in-out infinite;
        }

        /* Animated Data Block (floating element) */
        .animated-data-block {
          position: absolute;
          top: 0;
          left: 50%;
          transform: translateX(-50%);
          background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
          padding: 1rem 1.5rem;
          border-radius: 0.8rem;
          border: 3px solid #10b981;
          font-family: 'Courier New', monospace;
          font-size: 1.2rem;
          font-weight: 700;
          color: #065f46;
          box-shadow: 0 8px 24px rgba(16, 185, 129, 0.4);
          z-index: 10;
        }

        .data-value {
          text-align: center;
        }

        /* Animation Keyframes */
        @keyframes pushSlide {
          0% {
            transform: translateY(-30px);
            opacity: 0;
          }
          100% {
            transform: translateY(0);
            opacity: 1;
          }
        }

        @keyframes popSlide {
          0% {
            transform: translateY(0) scale(1);
            opacity: 1;
          }
          50% {
            transform: translateY(-15px) scale(1.05);
            opacity: 0.7;
          }
          100% {
            transform: translateY(-30px) scale(0.8);
            opacity: 0;
          }
        }

        @keyframes pulse {
          0%, 100% {
            transform: scale(1);
            box-shadow: 0 0 0 0 rgba(251, 191, 36, 0.7);
          }
          50% {
            transform: scale(1.05);
            box-shadow: 0 0 0 8px rgba(251, 191, 36, 0);
          }
        }

        @keyframes glow {
          0%, 100% {
            box-shadow: 0 0 5px rgba(99, 102, 241, 0.5);
          }
          50% {
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.8);
          }
        }

        /* Animation Info Panel */
        .animation-info-panel {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
          gap: 1rem;
        }

        .info-card {
          background: white;
          padding: 1.5rem;
          border-radius: 1rem;
          border: 2px solid #e5e7eb;
          display: flex;
          align-items: center;
          gap: 1rem;
          transition: all 0.3s ease;
        }

        .info-card:hover {
          transform: translateY(-3px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
          border-color: #6366f1;
        }

        .info-icon {
          font-size: 2rem;
        }

        .info-content h5 {
          font-family: 'Poppins', sans-serif;
          font-size: 0.85rem;
          color: #64748b;
          margin-bottom: 0.3rem;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        .info-value {
          font-family: 'Poppins', sans-serif;
          font-size: 1.5rem;
          color: #3b82f6;
          font-weight: 700;
          margin: 0;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
          .animation-controls {
            flex-direction: column;
            align-items: stretch;
          }

          .control-group {
            min-width: 100%;
          }

          .canvas-header {
            grid-template-columns: 100px 1fr 70px;
            gap: 0.5rem;
            font-size: 0.75rem;
          }

          .stack-block {
            grid-template-columns: 100px 1fr 70px;
            gap: 0.5rem;
          }

          .animation-info-panel {
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
          }
        }
      </style>

      <!-- Memory Viewer Styles -->
      <style>
        .memory-viewer-container {
          max-width: 1400px;
          margin: 0 auto;
          padding: 2rem;
        }

        .memory-viewer-header {
          text-align: center;
          margin-bottom: 2rem;
        }

        /* Control Panel */
        .memory-controls-panel {
          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
          padding: 2rem;
          border-radius: 1rem;
          margin-bottom: 2rem;
          border: 2px solid #e0e7ff;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }

        .control-group-mem {
          margin-bottom: 1.5rem;
        }

        .control-group-mem:last-child {
          margin-bottom: 0;
        }

        .control-label {
          display: block;
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem;
          font-weight: 600;
          color: #475569;
          margin-bottom: 0.7rem;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }

        /* Segment Buttons */
        .segment-buttons {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 0.75rem;
        }

        .segment-btn {
          background: white;
          border: 2px solid #e5e7eb;
          padding: 0.9rem 1.2rem;
          border-radius: 0.7rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.3s ease;
          color: #475569;
        }

        .segment-btn:hover {
          background: #f8fafc;
          border-color: #6366f1;
          transform: translateY(-2px);
          box-shadow: 0 4px 12px rgba(99, 102, 241, 0.2);
        }

        .segment-btn.active {
          background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%);
          color: white;
          border-color: #6366f1;
          box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        /* View Mode Buttons */
        .view-mode-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(99, 102, 241, 0.25) !important;
        }

        .view-mode-btn.active {
          background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%) !important;
          color: white !important;
          border-color: #6366f1 !important;
          box-shadow: 0 4px 16px rgba(99, 102, 241, 0.4) !important;
        }

        /* Memory cells editable cursor */
        .memory-data-cell {
          cursor: pointer;
          position: relative;
        }

        .memory-data-cell:hover::after {
          content: '✏️';
          position: absolute;
          top: -8px;
          right: -8px;
          font-size: 0.7rem;
          opacity: 0.6;
        }

        .memory-data-cell.editing {
          background: #fef3c7 !important;
          border: 2px solid #fbbf24 !important;
        }

        .memory-data-cell input {
          width: 100%;
          text-align: center;
          border: none;
          background: transparent;
          font-family: 'Courier New', monospace;
          font-size: inherit;
          padding: 0;
        }

        .memory-data-cell input:focus {
          outline: none;
        }

        /* Address Input */
        .address-input-group {
          display: flex;
          gap: 0.75rem;
        }

        .address-input {
          flex: 1;
          padding: 0.85rem 1.2rem;
          border: 2px solid #e5e7eb;
          border-radius: 0.7rem;
          font-family: 'Courier New', monospace;
          font-size: 0.95rem;
          transition: all 0.2s ease;
        }

        .address-input:focus {
          outline: none;
          border-color: #6366f1;
          box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        /* Action Buttons */
        .action-btn {
          padding: 0.85rem 1.5rem;
          border: none;
          border-radius: 0.7rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem;
          font-weight: 600;
          cursor: pointer;
          transition: all 0.2s ease;
        }

        .primary-btn {
          background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%);
          color: white;
          box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }

        .primary-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(99, 102, 241, 0.4);
        }

        .secondary-btn {
          background: white;
          color: #475569;
          border: 2px solid #e5e7eb;
        }

        .secondary-btn:hover {
          background: #f8fafc;
          border-color: #6366f1;
          color: #6366f1;
        }

        .write-btn {
          background: linear-gradient(90deg, #10b981 0%, #059669 100%);
          color: white;
          box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }

        .write-btn:hover {
          transform: translateY(-2px);
          box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);
        }

        .operation-buttons {
          display: flex;
          gap: 0.75rem;
          flex-wrap: wrap;
        }

        /* Segment Registers Panel */
        .segment-registers-panel {
          background: white;
          padding: 1.5rem;
          border-radius: 1rem;
          margin-bottom: 2rem;
          border: 2px solid #e5e7eb;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }

        .registers-grid-mem {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
          gap: 1rem;
        }

        .register-card-mem {
          background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
          padding: 1.2rem;
          border-radius: 0.8rem;
          border: 2px solid #bfdbfe;
          text-align: center;
          transition: all 0.3s ease;
        }

        .register-card-mem:hover {
          transform: translateY(-3px);
          box-shadow: 0 6px 16px rgba(59, 130, 246, 0.2);
          border-color: #3b82f6;
        }

        .register-name-mem {
          font-family: 'Poppins', sans-serif;
          font-size: 0.85rem;
          font-weight: 700;
          color: #64748b;
          text-transform: uppercase;
          letter-spacing: 1px;
          margin-bottom: 0.5rem;
        }

        .register-value-mem {
          font-family: 'Courier New', monospace;
          font-size: 1.3rem;
          font-weight: 700;
          color: #3b82f6;
          margin-bottom: 0.3rem;
        }

        .register-desc {
          font-family: 'Poppins', sans-serif;
          font-size: 0.75rem;
          color: #64748b;
        }

        /* Memory Grid */
        .memory-grid-container {
          background: white;
          padding: 1.5rem;
          border-radius: 1rem;
          margin-bottom: 2rem;
          border: 2px solid #e5e7eb;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }

        .memory-grid-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1rem;
          flex-wrap: wrap;
          gap: 1rem;
        }

        .memory-info {
          display: flex;
          gap: 1rem;
        }

        .info-badge {
          background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
          padding: 0.5rem 1rem;
          border-radius: 0.5rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.85rem;
          color: #475569;
          border: 2px solid #bfdbfe;
        }

        .info-badge strong {
          color: #3b82f6;
          font-family: 'Courier New', monospace;
        }

        .memory-grid-wrapper {
          overflow-x: auto;
          border-radius: 0.7rem;
          border: 2px solid #e5e7eb;
        }

        .memory-table {
          width: 100%;
          border-collapse: collapse;
          font-family: 'Courier New', monospace;
          font-size: 0.85rem;
        }

        .memory-table thead {
          background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%);
          color: white;
          position: sticky;
          top: 0;
          z-index: 10;
        }

        .memory-table th {
          padding: 0.75rem 0.5rem;
          text-align: center;
          font-weight: 700;
          font-size: 0.75rem;
          letter-spacing: 0.5px;
        }

        .memory-table td {
          padding: 0.6rem 0.5rem;
          text-align: center;
          border: 1px solid #e5e7eb;
          transition: all 0.2s ease;
        }

        .memory-table tbody tr:hover {
          background: #f8fafc;
        }

        .memory-address-cell {
          background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
          font-weight: 700;
          color: #475569;
          position: sticky;
          left: 0;
        }

        .memory-data-cell {
          cursor: pointer;
          color: #3b82f6;
          font-weight: 600;
          position: relative;
        }

        .memory-data-cell:hover {
          background: #dbeafe !important;
          box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
          z-index: 10;
          border: 2px solid #3b82f6 !important;
          font-weight: 700;
        }
        
        .memory-data-cell:hover::after {
          content: '👆 Click to Read';
          position: absolute;
          top: -35px;
          left: 50%;
          transform: translateX(-50%);
          background: #1e293b;
          color: white;
          padding: 0.4rem 0.7rem;
          border-radius: 0.4rem;
          font-size: 0.75rem;
          white-space: nowrap;
          box-shadow: 0 2px 8px rgba(0,0,0,0.2);
          z-index: 1000;
          animation: tooltipBounce 0.3s ease;
        }
        
        @keyframes tooltipBounce {
          0% { opacity: 0; top: -25px; }
          100% { opacity: 1; top: -35px; }
        }

        .memory-data-cell.written {
          background: #dcfce7;
          color: #059669;
          animation: writeFlash 0.5s ease-out;
        }

        .memory-data-cell.read {
          background: #fef3c7;
          color: #f59e0b;
          animation: readFlash 0.5s ease-out;
        }
        
        /* Highlight target row after navigation */
        .memory-table tr.highlight-row {
          background: #fef9c3 !important;
          animation: highlightRow 1.5s ease-out;
        }
        
        .memory-table tr.highlight-row .memory-data-cell {
          background: #fef3c7;
          border: 2px solid #fbbf24;
        }

        .memory-ascii-cell {
          color: #64748b;
          font-size: 0.8rem;
        }
        
        @keyframes highlightRow {
          0% {
            background: #fbbf24;
          }
          100% {
            background: #fef9c3;
          }
        }

        @keyframes writeFlash {
          0%, 100% { transform: scale(1); }
          50% { transform: scale(1.1); }
        }

        @keyframes readFlash {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.6; }
        }

        /* Memory History Panel */
        .memory-history-panel {
          background: white;
          padding: 1.5rem;
          border-radius: 1rem;
          margin-bottom: 2rem;
          border: 2px solid #e5e7eb;
          box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);
        }

        .history-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 1rem;
        }

        .history-count {
          background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
          padding: 0.4rem 0.9rem;
          border-radius: 0.5rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.85rem;
          color: #3b82f6;
          font-weight: 600;
          border: 2px solid #bfdbfe;
        }

        .history-log {
          max-height: 300px;
          overflow-y: auto;
          border-radius: 0.7rem;
          border: 2px solid #e5e7eb;
          padding: 1rem;
        }

        .history-empty {
          text-align: center;
          padding: 2rem 1rem;
          color: #94a3b8;
        }

        .history-empty p {
          font-family: 'Poppins', sans-serif;
          margin-top: 0.5rem;
        }

        .history-item {
          padding: 0.8rem 1rem;
          margin-bottom: 0.5rem;
          border-radius: 0.5rem;
          font-family: 'Poppins', sans-serif;
          font-size: 0.85rem;
          display: flex;
          justify-content: space-between;
          align-items: center;
          transition: all 0.2s ease;
        }

        .history-item:hover {
          transform: translateX(5px);
        }

        .history-item.write-operation {
          background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
          border: 2px solid #86efac;
        }

        .history-item.read-operation {
          background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
          border: 2px solid #fbbf24;
        }

        /* Memory Statistics */
        .memory-stats-panel {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
          gap: 1rem;
          margin-bottom: 2rem;
        }

        .stat-card-mem {
          background: white;
          padding: 1.5rem;
          border-radius: 1rem;
          border: 2px solid #e5e7eb;
          display: flex;
          align-items: center;
          gap: 1rem;
          transition: all 0.3s ease;
        }

        .stat-card-mem:hover {
          transform: translateY(-3px);
          box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
          border-color: #6366f1;
        }

        .stat-icon {
          font-size: 2rem;
        }

        .stat-content {
          flex: 1;
        }

        .stat-label {
          font-family: 'Poppins', sans-serif;
          font-size: 0.8rem;
          color: #64748b;
          font-weight: 600;
          text-transform: uppercase;
          letter-spacing: 0.5px;
          margin-bottom: 0.3rem;
        }

        .stat-value {
          font-family: 'Poppins', sans-serif;
          font-size: 1.4rem;
          color: #3b82f6;
          font-weight: 700;
        }

        /* Write Dialog */
        .memory-write-dialog {
          position: fixed;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: rgba(0, 0, 0, 0.5);
          display: flex;
          align-items: center;
          justify-content: center;
          z-index: 1000;
          animation: fadeIn 0.2s ease-out;
        }

        .dialog-content {
          background: white;
          padding: 2rem;
          border-radius: 1rem;
          max-width: 400px;
          width: 90%;
          box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
          animation: slideInUp 0.3s ease-out;
        }

        .dialog-content h4 {
          color: #6366f1;
          margin-bottom: 1.5rem;
          font-family: 'Poppins', sans-serif;
        }

        .dialog-input-group {
          margin-bottom: 1.2rem;
        }

        .dialog-input-group label {
          display: block;
          font-family: 'Poppins', sans-serif;
          font-size: 0.9rem;
          color: #475569;
          font-weight: 600;
          margin-bottom: 0.5rem;
        }

        .dialog-input-group input {
          width: 100%;
          padding: 0.8rem 1rem;
          border: 2px solid #e5e7eb;
          border-radius: 0.5rem;
          font-family: 'Courier New', monospace;
          font-size: 0.95rem;
          transition: all 0.2s ease;
        }

        .dialog-input-group input:focus {
          outline: none;
          border-color: #6366f1;
          box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .dialog-buttons {
          display: flex;
          gap: 0.75rem;
          margin-top: 1.5rem;
        }

        .dialog-buttons button {
          flex: 1;
        }

        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }

        /* Responsive */
        @media (max-width: 768px) {
          .memory-viewer-container {
            padding: 1rem;
          }

          .segment-buttons {
            grid-template-columns: 1fr 1fr;
          }

          .address-input-group {
            flex-direction: column;
          }

          .memory-info {
            flex-direction: column;
            gap: 0.5rem;
          }

          .memory-table {
            font-size: 0.75rem;
          }

          .memory-table th,
          .memory-table td {
            padding: 0.4rem 0.3rem;
          }
        }
      </style>

      <!-- Operation History Table -->
      <div id="boothHistory" style="display:none; animation: slideInUp 0.6s ease-out;">
        <h4 style="color: #6366f1; margin-bottom: 1rem; font-size: 1.1rem; font-weight: 700; font-family: 'Poppins', sans-serif; display: flex; align-items: center; gap: 0.5rem;">
          <span style="font-size: 1.3rem;">📜</span> Operation History
        </h4>
        <div style="overflow-x: auto; border-radius: 1rem; box-shadow: 0 4px 16px rgba(0,0,0,0.08); border: 2px solid #e0e7ff;">
          <table id="boothTable" style="width: 100%; border-collapse: collapse; font-size: 0.9rem; background: white;">
            <thead>
              <tr style="background: linear-gradient(90deg, #6366f1 0%, #8b5cf6 100%); color: white;">
                <th style="padding: 0.85rem; border: none; text-align: center; font-weight: 700; font-family: 'Poppins', sans-serif; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.5px;">Step</th>
                <th style="padding: 0.85rem; border: none; text-align: center; font-weight: 700; font-family: 'Poppins', sans-serif; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.5px;">Q Q-1</th>
                <th style="padding: 0.85rem; border: none; text-align: center; font-weight: 700; font-family: 'Poppins', sans-serif; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.5px;">Operation</th>
                <th style="padding: 0.85rem; border: none; text-align: center; font-weight: 700; font-family: 'Poppins', sans-serif; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.5px;">A</th>
                <th style="padding: 0.85rem; border: none; text-align: center; font-weight: 700; font-family: 'Poppins', sans-serif; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.5px;">Q</th>
                <th style="padding: 0.85rem; border: none; text-align: center; font-weight: 700; font-family: 'Poppins', sans-serif; text-transform: uppercase; font-size: 0.75rem; letter-spacing: 0.5px;">Q-1</th>
              </tr>
            </thead>
            <tbody id="boothTableBody">
            </tbody>
          </table>
        </div>
      </div>
    </div>  <!-- Close booths-algorithm tab-content -->

    <!-- Memory Viewer Tab -->
    <div id="memory-viewer" class="tab-content">
      <div class="memory-viewer-container">
        <!-- Header -->
        <div class="memory-viewer-header">
          <h3 style="color: #6366f1; margin-bottom: 0.5rem; font-size: 1.3rem; display: flex; align-items: center; gap: 0.5rem;">
            <span style="font-size: 1.5rem;">💾</span> 8086 Memory Viewer
          </h3>
          <p style="color: #64748b; font-size: 0.9rem; margin-bottom: 0.5rem;">
            View and edit computer memory like a real programmer! 1MB of simulated memory space.
          </p>
        </div>

        <!-- Quick Start Guide -->
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 1.5rem; border-radius: 1rem; margin-bottom: 1.5rem; color: white; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);">
          <h4 style="margin: 0 0 1rem 0; font-size: 1.1rem; display: flex; align-items: center; gap: 0.5rem;">
            <span style="font-size: 1.3rem;">🎯</span> Quick Start Guide
          </h4>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
            <div style="background: rgba(255,255,255,0.15); padding: 1rem; border-radius: 0.5rem; backdrop-filter: blur(10px);">
              <div style="font-weight: 700; margin-bottom: 0.5rem;">1️⃣ Write Data</div>
              <div style="font-size: 0.85rem; opacity: 0.95;">Click green "Write Memory" button to store a value at any address</div>
            </div>
            <div style="background: rgba(255,255,255,0.15); padding: 1rem; border-radius: 0.5rem; backdrop-filter: blur(10px);">
              <div style="font-weight: 700; margin-bottom: 0.5rem;">2️⃣ Read Data</div>
              <div style="font-size: 0.85rem; opacity: 0.95;">Click any memory cell to see its value in hex, decimal & ASCII</div>
            </div>
            <div style="background: rgba(255,255,255,0.15); padding: 1rem; border-radius: 0.5rem; backdrop-filter: blur(10px);">
              <div style="font-weight: 700; margin-bottom: 0.5rem;">3️⃣ Navigate</div>
              <div style="font-size: 0.85rem; opacity: 0.95;">Type address or click segment buttons to jump around memory</div>
            </div>
          </div>
        </div>

        <!-- Simplified Control Panel -->
        <div style="background: white; padding: 1.5rem; border-radius: 1rem; margin-bottom: 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
          
          <!-- Main Actions (Prominent) -->
          <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
            <button onclick="showWriteDialog()" style="flex: 1; min-width: 200px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 1.2rem; border-radius: 0.8rem; font-size: 1.1rem; font-weight: 700; cursor: pointer; box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3); transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(16, 185, 129, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(16, 185, 129, 0.3)'">
              <span style="font-size: 1.5rem;">✍️</span>
              <span>Write to Memory</span>
            </button>
            
            <button onclick="demoWriteAndRead()" style="flex: 1; min-width: 200px; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; border: none; padding: 1.2rem; border-radius: 0.8rem; font-size: 1.1rem; font-weight: 700; cursor: pointer; box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3); transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(99, 102, 241, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(99, 102, 241, 0.3)'">
              <span style="font-size: 1.5rem;">🎬</span>
              <span>Try Demo</span>
            </button>
          </div>

          <!-- Navigation Section -->
          <div style="border-top: 2px solid #f1f5f9; padding-top: 1.5rem;">
            <h4 style="color: #475569; margin: 0 0 1rem 0; font-size: 0.95rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
              <span>🧭</span> Jump to Address
            </h4>
            <div style="display: flex; gap: 0.75rem; margin-bottom: 1.5rem; flex-wrap: wrap;">
              <input type="text" id="memoryAddressInput" placeholder="Type address (e.g. 100 or 1000)" style="flex: 1; min-width: 200px; padding: 0.9rem 1.2rem; border: 2px solid #e2e8f0; border-radius: 0.6rem; font-size: 1rem; font-family: 'Courier New', monospace; transition: all 0.3s ease;" onkeypress="if(event.key === 'Enter') goToAddress()" onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 3px rgba(99, 102, 241, 0.1)'" onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'" />
              <button onclick="goToAddress()" style="padding: 0.9rem 1.5rem; background: #6366f1; color: white; border: none; border-radius: 0.6rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='#4f46e5'" onmouseout="this.style.background='#6366f1'">
                🔍 Go
              </button>
              <button onclick="randomMemoryAccess()" style="padding: 0.9rem 1.5rem; background: #f1f5f9; color: #475569; border: none; border-radius: 0.6rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='#e2e8f0'" onmouseout="this.style.background='#f1f5f9'">
                🎲 Random
              </button>
            </div>

            <!-- Segment Buttons -->
            <h4 style="color: #475569; margin: 0 0 1rem 0; font-size: 0.95rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
              <span>📍</span> Memory Segments
            </h4>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 0.75rem; margin-bottom: 1rem;">
              <button class="segment-btn active" onclick="switchSegment('data')" id="segmentData" title="Data storage (starts at 0x00000)">
                📂 Data
              </button>
              <button class="segment-btn" onclick="switchSegment('code')" id="segmentCode" title="Program code (starts at 0x10000)">
                📝 Code
              </button>
              <button class="segment-btn" onclick="switchSegment('stack')" id="segmentStack" title="Stack memory (starts at 0xFFFF0)">
                📚 Stack
              </button>
              <button class="segment-btn" onclick="switchSegment('extra')" id="segmentExtra" title="Extra storage (starts at 0x20000)">
                ➕ Extra
              </button>
            </div>

            <!-- Utility Buttons -->
            <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
              <button onclick="showMemoryFillDialog()" style="padding: 0.7rem 1.2rem; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; border: none; border-radius: 0.5rem; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; box-shadow: 0 2px 8px rgba(139, 92, 246, 0.3);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(139, 92, 246, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(139, 92, 246, 0.3)'">
                🎨 Fill Memory
              </button>
              <button onclick="clearMemoryHistory()" style="padding: 0.7rem 1.2rem; background: #f1f5f9; color: #475569; border: none; border-radius: 0.5rem; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='#e2e8f0'" onmouseout="this.style.background='#f1f5f9'">
                🗑️ Clear History
              </button>
              <button onclick="exportMemoryData()" style="padding: 0.7rem 1.2rem; background: #f1f5f9; color: #475569; border: none; border-radius: 0.5rem; font-size: 0.9rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease;" onmouseover="this.style.background='#e2e8f0'" onmouseout="this.style.background='#f1f5f9'">
                💾 Export
              </button>
            </div>
          </div>
        </div>

        <!-- Segment Registers Display -->
        <div class="segment-registers-panel">
          <h4 style="color: #6366f1; margin-bottom: 1rem; font-size: 1rem;">Segment Registers</h4>
          <div class="registers-grid-mem">
            <div class="register-card-mem">
              <div class="register-name-mem">CS</div>
              <div class="register-value-mem" id="csRegister">0x0000</div>
              <div class="register-desc">Code Segment</div>
            </div>
            <div class="register-card-mem">
              <div class="register-name-mem">DS</div>
              <div class="register-value-mem" id="dsRegister">0x0000</div>
              <div class="register-desc">Data Segment</div>
            </div>
            <div class="register-card-mem">
              <div class="register-name-mem">SS</div>
              <div class="register-value-mem" id="ssRegister">0xFFFF</div>
              <div class="register-desc">Stack Segment</div>
            </div>
            <div class="register-card-mem">
              <div class="register-name-mem">ES</div>
              <div class="register-value-mem" id="esRegister">0x0000</div>
              <div class="register-desc">Extra Segment</div>
            </div>
          </div>
        </div>

        <!-- View Mode Toggle Buttons -->
        <div style="background: white; padding: 1.5rem; border-radius: 1rem; margin-bottom: 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
          <h4 style="color: #6366f1; margin: 0 0 1rem 0; font-size: 1rem; display: flex; align-items: center; gap: 0.5rem;">
            <span>👁️</span> Display Format
          </h4>
          <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
            <button onclick="setViewMode('hex')" id="viewModeHex" class="view-mode-btn active" style="flex: 1; min-width: 120px; padding: 0.9rem 1.2rem; background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%); color: white; border: none; border-radius: 0.6rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 0.95rem;">
              <span style="font-size: 1.2rem;">🔢</span>
              <span>Hexadecimal</span>
            </button>
            <button onclick="setViewMode('dec')" id="viewModeDec" class="view-mode-btn" style="flex: 1; min-width: 120px; padding: 0.9rem 1.2rem; background: #f1f5f9; color: #475569; border: 2px solid #e2e8f0; border-radius: 0.6rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 0.95rem;">
              <span style="font-size: 1.2rem;">📊</span>
              <span>Decimal</span>
            </button>
            <button onclick="setViewMode('bin')" id="viewModeBin" class="view-mode-btn" style="flex: 1; min-width: 120px; padding: 0.9rem 1.2rem; background: #f1f5f9; color: #475569; border: 2px solid #e2e8f0; border-radius: 0.6rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 0.95rem;">
              <span style="font-size: 1.2rem;">💾</span>
              <span>Binary</span>
            </button>
            <button onclick="setViewMode('ascii')" id="viewModeAscii" class="view-mode-btn" style="flex: 1; min-width: 120px; padding: 0.9rem 1.2rem; background: #f1f5f9; color: #475569; border: 2px solid #e2e8f0; border-radius: 0.6rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem; font-size: 0.95rem;">
              <span style="font-size: 1.2rem;">🔤</span>
              <span>ASCII Text</span>
            </button>
          </div>
          <p style="color: #64748b; font-size: 0.8rem; margin: 1rem 0 0 0; text-align: center;">
            <strong>💡 Tip:</strong> Double-click any cell to edit its value directly!
          </p>
        </div>

        <!-- Memory Search Panel -->
        <div style="background: white; padding: 1.5rem; border-radius: 1rem; margin-bottom: 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
          <h4 style="color: #6366f1; margin: 0 0 1rem 0; font-size: 1.1rem; display: flex; align-items: center; gap: 0.5rem; font-weight: 700;">
            <span style="font-size: 1.3rem;">🔍</span> Memory Search
          </h4>
          
          <!-- Search Input Row -->
          <div style="margin-bottom: 1rem;">
            <label style="display: block; font-size: 0.85rem; font-weight: 600; color: #64748b; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px;">
              Search Value
            </label>
            <input type="text" id="searchInput" placeholder="Enter value to search (e.g., FF, 255, 11111111, Hello)" 
              style="width: 100%; padding: 1rem 1.2rem; border: 2px solid #e2e8f0; border-radius: 0.6rem; font-size: 1rem; font-family: 'Courier New', monospace; transition: all 0.3s ease; box-sizing: border-box;" 
              onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 4px rgba(99, 102, 241, 0.1)'" 
              onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'" 
              onkeypress="if(event.key === 'Enter') searchMemory()" />
          </div>

          <!-- Format Selector + Search Button Row -->
          <div style="display: grid; grid-template-columns: 1fr auto; gap: 1rem; align-items: start; margin-bottom: 1rem;">
            <div>
              <label style="display: block; font-size: 0.85rem; font-weight: 600; color: #64748b; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px;">
                Search Format
              </label>
              <select id="searchFormat" onchange="updateFormatHint()" style="width: 100%; padding: 1rem 1.2rem; border: 2px solid #e2e8f0; border-radius: 0.6rem; font-size: 0.95rem; font-weight: 600; cursor: pointer; background: white; transition: all 0.3s ease; box-sizing: border-box; min-height: 52px;" onfocus="this.style.borderColor='#6366f1'; this.style.boxShadow='0 0 0 4px rgba(99, 102, 241, 0.1)'" onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none'">
                <option value="hex">Hex</option>
                <option value="dec">Decimal</option>
                <option value="bin">Binary</option>
                <option value="ascii">ASCII</option>
              </select>
              <p style="margin: 0.5rem 0 0 0; font-size: 0.75rem; color: #94a3b8;">
                <span id="formatHint">Examples: FF, A5, 3E, 00</span>
              </p>
            </div>
            <div style="padding-top: 1.9rem;">
              <button onclick="searchMemory()" style="padding: 1rem 2rem; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; border-radius: 0.6rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease; white-space: nowrap; font-size: 1rem; box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3); height: 52px;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 20px rgba(245, 158, 11, 0.4)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(245, 158, 11, 0.3)'">
                🔍 Search
              </button>
            </div>
          </div>

          <!-- Search Results -->
          <div id="searchResults" style="display: none;">
            <div style="display: flex; flex-direction: column; gap: 1rem; padding: 1.2rem; background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border: 2px solid #fbbf24; border-radius: 0.8rem; box-shadow: 0 2px 8px rgba(251, 191, 36, 0.2);">
              <div style="display: flex; align-items: center; justify-content: space-between;">
                <span id="searchResultText" style="font-size: 1rem; font-weight: 700; color: #92400e; display: flex; align-items: center; gap: 0.5rem;">
                  <span style="font-size: 1.2rem;">✅</span> Found 0 matches
                </span>
              </div>
              <div style="display: flex; gap: 0.75rem; flex-wrap: wrap;">
                <button onclick="goToPreviousSearchResult()" style="flex: 1; min-width: 120px; padding: 0.8rem 1.2rem; background: white; color: #92400e; border: 2px solid #fbbf24; border-radius: 0.6rem; font-weight: 700; cursor: pointer; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem;" onmouseover="this.style.background='#fef3c7'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='white'; this.style.transform='translateY(0)'">
                  <span>⬅️</span> Previous
                </button>
                <button onclick="goToNextSearchResult()" style="flex: 1; min-width: 120px; padding: 0.8rem 1.2rem; background: white; color: #92400e; border: 2px solid #fbbf24; border-radius: 0.6rem; font-weight: 700; cursor: pointer; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem;" onmouseover="this.style.background='#fef3c7'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='white'; this.style.transform='translateY(0)'">
                  <span>Next</span> ➡️
                </button>
                <button onclick="clearSearch()" style="flex: 1; min-width: 120px; padding: 0.8rem 1.2rem; background: #dc2626; color: white; border: 2px solid #b91c1c; border-radius: 0.6rem; font-weight: 700; cursor: pointer; font-size: 0.95rem; transition: all 0.3s ease; display: flex; align-items: center; justify-content: center; gap: 0.5rem;" onmouseover="this.style.background='#b91c1c'; this.style.transform='translateY(-2px)'" onmouseout="this.style.background='#dc2626'; this.style.transform='translateY(0)'">
                  <span>❌</span> Clear
                </button>
              </div>
            </div>
          </div>

          <!-- Search Tips -->
          <div style="margin-top: 1rem; padding: 1rem; background: #f8fafc; border-left: 4px solid #6366f1; border-radius: 0.5rem;">
            <p style="color: #475569; font-size: 0.85rem; margin: 0; line-height: 1.6;">
              <strong style="color: #6366f1;">💡 Search Tips:</strong><br>
              • Press <kbd style="background: white; padding: 0.2rem 0.5rem; border-radius: 0.3rem; border: 1px solid #e2e8f0; font-family: monospace;">Enter</kbd> to search quickly<br>
              • Use navigation buttons to jump between matches<br>
              • Search highlights matching cells in the memory grid
            </p>
          </div>
        </div>

        <!-- Data Type Inspector Panel -->
        <div style="background: white; padding: 1.5rem; border-radius: 1rem; margin-bottom: 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.08);">
          <h4 style="color: #6366f1; margin: 0 0 1rem 0; font-size: 1.1rem; display: flex; align-items: center; gap: 0.5rem; font-weight: 700;">
            <span style="font-size: 1.3rem;">📊</span> Data Type Inspector
          </h4>
          <div style="padding: 1rem; background: #f8fafc; border-left: 4px solid #3b82f6; border-radius: 0.5rem; margin-bottom: 1rem;">
            <p style="color: #475569; font-size: 0.9rem; margin: 0; line-height: 1.6;">
              <strong style="color: #3b82f6;">👆 How to use:</strong> Click any memory cell in the grid below to see how its value is interpreted as different data types (8-bit, 16-bit, 32-bit, float, and ASCII).
            </p>
          </div>
          <div id="dataTypeInspector" style="display: none;">
            <div style="background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%); padding: 1.5rem; border-radius: 0.8rem; border: 2px solid #3b82f6; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.2);">
              <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.2rem;">
                <!-- Address -->
                <div style="background: white; padding: 1rem; border-radius: 0.6rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="font-size: 0.75rem; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.6rem; display: flex; align-items: center; gap: 0.3rem;">
                    <span>📍</span> Address
                  </div>
                  <div id="inspectorAddress" style="font-family: 'Courier New', monospace; font-size: 1.2rem; color: #3b82f6; font-weight: 700;">0x0000</div>
                </div>
                
                <!-- Unsigned Byte -->
                <div style="background: white; padding: 1rem; border-radius: 0.6rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="font-size: 0.75rem; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.6rem; display: flex; align-items: center; gap: 0.3rem;">
                    <span>🔢</span> Unsigned Byte
                  </div>
                  <div id="inspectorByte" style="font-family: 'Courier New', monospace; font-size: 1.2rem; color: #059669; font-weight: 700;">0</div>
                  <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.3rem;">0-255</div>
                </div>
                
                <!-- Signed Byte -->
                <div style="background: white; padding: 1rem; border-radius: 0.6rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="font-size: 0.75rem; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.6rem; display: flex; align-items: center; gap: 0.3rem;">
                    <span>➕➖</span> Signed Byte
                  </div>
                  <div id="inspectorSignedByte" style="font-family: 'Courier New', monospace; font-size: 1.2rem; color: #059669; font-weight: 700;">0</div>
                  <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.3rem;">-128 to 127</div>
                </div>
                
                <!-- Word LE -->
                <div style="background: white; padding: 1rem; border-radius: 0.6rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="font-size: 0.75rem; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.6rem; display: flex; align-items: center; gap: 0.3rem;">
                    <span>📦</span> Word (LE)
                  </div>
                  <div id="inspectorWord" style="font-family: 'Courier New', monospace; font-size: 1.2rem; color: #8b5cf6; font-weight: 700;">0</div>
                  <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.3rem;">16-bit Little-Endian</div>
                </div>
                
                <!-- Word BE -->
                <div style="background: white; padding: 1rem; border-radius: 0.6rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="font-size: 0.75rem; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.6rem; display: flex; align-items: center; gap: 0.3rem;">
                    <span>📦</span> Word (BE)
                  </div>
                  <div id="inspectorWordBE" style="font-family: 'Courier New', monospace; font-size: 1.2rem; color: #8b5cf6; font-weight: 700;">0</div>
                  <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.3rem;">16-bit Big-Endian</div>
                </div>
                
                <!-- DWord -->
                <div style="background: white; padding: 1rem; border-radius: 0.6rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="font-size: 0.75rem; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.6rem; display: flex; align-items: center; gap: 0.3rem;">
                    <span>📦📦</span> DWord
                  </div>
                  <div id="inspectorDWord" style="font-family: 'Courier New', monospace; font-size: 1.2rem; color: #ec4899; font-weight: 700;">0</div>
                  <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.3rem;">32-bit Integer</div>
                </div>
                
                <!-- Float -->
                <div style="background: white; padding: 1rem; border-radius: 0.6rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="font-size: 0.75rem; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.6rem; display: flex; align-items: center; gap: 0.3rem;">
                    <span>🔢.🔢</span> Float
                  </div>
                  <div id="inspectorFloat" style="font-family: 'Courier New', monospace; font-size: 1.2rem; color: #f59e0b; font-weight: 700;">0.0</div>
                  <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.3rem;">32-bit IEEE 754</div>
                </div>
                
                <!-- ASCII String -->
                <div style="background: white; padding: 1rem; border-radius: 0.6rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                  <div style="font-size: 0.75rem; color: #64748b; font-weight: 700; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 0.6rem; display: flex; align-items: center; gap: 0.3rem;">
                    <span>🔤</span> ASCII String
                  </div>
                  <div id="inspectorString" style="font-family: 'Courier New', monospace; font-size: 1.2rem; color: #06b6d4; font-weight: 700; word-break: break-all;">"..."</div>
                  <div style="font-size: 0.7rem; color: #64748b; margin-top: 0.3rem;">Up to 16 chars</div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Memory Grid Container -->
        <div class="memory-grid-container">
          <div class="memory-grid-header">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; flex-wrap: wrap; gap: 1rem;">
              <div>
                <h4 style="color: #6366f1; margin: 0 0 0.3rem 0; font-size: 1.1rem;">💾 Memory Contents</h4>
                <p style="color: #64748b; font-size: 0.85rem; margin: 0;">
                  <strong>Tip:</strong> Click to read, double-click to edit. Green cells = written data.
                </p>
              </div>
              <div class="memory-info">
                <span class="info-badge">Current: <strong id="currentAddressDisplay">0x0000</strong></span>
                <span class="info-badge">Range: <strong id="addressRangeDisplay">0x0000 - 0x00FF</strong></span>
              </div>
            </div>
          </div>

          <!-- Memory Grid -->
          <div class="memory-grid-wrapper">
            <table class="memory-table">
              <thead>
                <tr>
                  <th>Address</th>
                  <th>+0</th>
                  <th>+1</th>
                  <th>+2</th>
                  <th>+3</th>
                  <th>+4</th>
                  <th>+5</th>
                  <th>+6</th>
                  <th>+7</th>
                  <th>+8</th>
                  <th>+9</th>
                  <th>+A</th>
                  <th>+B</th>
                  <th>+C</th>
                  <th>+D</th>
                  <th>+E</th>
                  <th>+F</th>
                  <th>ASCII</th>
                </tr>
              </thead>
              <tbody id="memoryTableBody">
                <!-- Memory cells will be rendered here -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Memory Operation History -->
        <div class="memory-history-panel">
          <div class="history-header">
            <h4 style="color: #6366f1; margin-bottom: 0;">Operation History</h4>
            <span class="history-count">0 operations</span>
          </div>
          <div class="history-log" id="memoryHistoryLog">
            <div class="history-empty">
              <span style="font-size: 2rem;">📝</span>
              <p>No memory operations yet. Perform read/write operations to see history.</p>
            </div>
          </div>
        </div>

        <!-- Color Legend Guide -->
        <div style="background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%); padding: 1.2rem; border-radius: 0.8rem; margin-bottom: 1.5rem; border: 2px solid #e2e8f0;">
          <h4 style="color: #475569; margin: 0 0 1rem 0; font-size: 0.95rem; font-weight: 600; display: flex; align-items: center; gap: 0.5rem;">
            <span>🎨</span> Color Guide
          </h4>
          <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.8rem;">
            <div style="display: flex; align-items: center; gap: 0.7rem;">
              <div style="width: 40px; height: 30px; background: #dbeafe; border: 2px solid #3b82f6; border-radius: 0.3rem; flex-shrink: 0;"></div>
              <span style="font-size: 0.85rem; color: #475569;"><strong>Blue</strong> = Empty memory (00)</span>
            </div>
            <div style="display: flex; align-items: center; gap: 0.7rem;">
              <div style="width: 40px; height: 30px; background: #dcfce7; border: 2px solid #10b981; border-radius: 0.3rem; flex-shrink: 0;"></div>
              <span style="font-size: 0.85rem; color: #475569;"><strong>Green</strong> = Written data</span>
            </div>
            <div style="display: flex; align-items: center; gap: 0.7rem;">
              <div style="width: 40px; height: 30px; background: #fef9c3; border: 2px solid #fbbf24; border-radius: 0.3rem; flex-shrink: 0;"></div>
              <span style="font-size: 0.85rem; color: #475569;"><strong>Yellow</strong> = Current row</span>
            </div>
          </div>
        </div>

        <!-- Memory Statistics -->
        <div class="memory-stats-panel">
          <div class="stat-card-mem">
            <div class="stat-icon">📊</div>
            <div class="stat-content">
              <div class="stat-label">Total Reads</div>
              <div class="stat-value" id="totalReads">0</div>
            </div>
          </div>
          <div class="stat-card-mem">
            <div class="stat-icon">✍️</div>
            <div class="stat-content">
              <div class="stat-label">Total Writes</div>
              <div class="stat-value" id="totalWrites">0</div>
            </div>
          </div>
          <div class="stat-card-mem">
            <div class="stat-icon">💾</div>
            <div class="stat-content">
              <div class="stat-label">Memory Used</div>
              <div class="stat-value" id="memoryUsed">0 bytes</div>
            </div>
          </div>
          <div class="stat-card-mem">
            <div class="stat-icon">⚡</div>
            <div class="stat-content">
              <div class="stat-label">Last Access</div>
              <div class="stat-value" id="lastAccess">Never</div>
            </div>
          </div>
        </div>

        <!-- Write Memory Dialog (Hidden by default) -->
        <div class="memory-write-dialog" id="writeMemoryDialog" style="display: none;">
          <div class="dialog-content" style="max-width: 500px;">
            <h4 style="margin-bottom: 0.5rem;">✍️ Write to Memory</h4>
            <p style="color: #64748b; font-size: 0.85rem; margin-bottom: 1.5rem;">Store a value at any memory address (like a programmer!)</p>
            
            <div class="dialog-input-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <span>📍 Memory Address</span>
                <span style="font-size: 0.75rem; color: #64748b; font-weight: normal;">(hex number 0-FFFFF)</span>
              </label>
              <input type="text" id="writeAddressInput" placeholder="Try: 100, 1000, or ABCD" style="width: 100%; padding: 0.9rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; font-size: 1rem; font-family: 'Courier New', monospace;" />
              <p style="font-size: 0.75rem; color: #64748b; margin: 0.3rem 0 0 0;">Examples: 100, 0x1000, FFFF0</p>
            </div>
            
            <div class="dialog-input-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <span>💾 Data Value</span>
                <span style="font-size: 0.75rem; color: #64748b; font-weight: normal;">(hex byte 00-FF)</span>
              </label>
              <input type="text" id="writeValueInput" placeholder="Try: 42, FF, or A5" maxlength="4" style="width: 100%; padding: 0.9rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; font-size: 1rem; font-family: 'Courier New', monospace;" />
              <p style="font-size: 0.75rem; color: #64748b; margin: 0.3rem 0 0 0;">Examples: 42 (letter B), FF (max value), 00 (zero)</p>
            </div>
            
            <div class="dialog-buttons" style="margin-top: 1.5rem;">
              <button onclick="executeMemoryWrite()" class="action-btn primary-btn" style="flex: 1; background: #10b981; padding: 0.9rem;">
                ✅ Write to Memory
              </button>
              <button onclick="closeWriteDialog()" class="action-btn secondary-btn" style="flex: 1; padding: 0.9rem;">
                ❌ Cancel
              </button>
            </div>
          </div>
        </div>

        <!-- Memory Fill Dialog (Hidden by default) -->
        <div class="memory-write-dialog" id="memoryFillDialog" style="display: none;">
          <div class="dialog-content" style="max-width: 550px;">
            <h4 style="margin-bottom: 0.5rem;">🎨 Fill Memory Range</h4>
            <p style="color: #64748b; font-size: 0.85rem; margin-bottom: 1.5rem;">Fill a range of memory addresses with a value or pattern</p>
            
            <div class="dialog-input-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <span>📍 Start Address</span>
                <span style="font-size: 0.75rem; color: #64748b; font-weight: normal;">(hex: 0-FFFFF)</span>
              </label>
              <input type="text" id="fillStartAddress" placeholder="e.g., 1000" style="width: 100%; padding: 0.9rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; font-size: 1rem; font-family: 'Courier New', monospace;" />
            </div>
            
            <div class="dialog-input-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <span>🏁 End Address</span>
                <span style="font-size: 0.75rem; color: #64748b; font-weight: normal;">(hex: 0-FFFFF)</span>
              </label>
              <input type="text" id="fillEndAddress" placeholder="e.g., 10FF" style="width: 100%; padding: 0.9rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; font-size: 1rem; font-family: 'Courier New', monospace;" />
            </div>
            
            <div class="dialog-input-group">
              <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem;">
                <span>💾 Fill Value</span>
                <span style="font-size: 0.75rem; color: #64748b; font-weight: normal;">(hex byte: 00-FF)</span>
              </label>
              <input type="text" id="fillValue" placeholder="e.g., FF or 00" maxlength="4" style="width: 100%; padding: 0.9rem; border: 2px solid #e2e8f0; border-radius: 0.5rem; font-size: 1rem; font-family: 'Courier New', monospace;" />
              <p style="font-size: 0.75rem; color: #64748b; margin: 0.3rem 0 0 0;">Examples: 00 (zeros), FF (all ones), AA (pattern)</p>
            </div>
            
            <div class="dialog-buttons" style="margin-top: 1.5rem;">
              <button onclick="executeMemoryFill()" class="action-btn primary-btn" style="flex: 1; background: #8b5cf6; padding: 0.9rem;">
                ✅ Fill Memory
              </button>
              <button onclick="closeMemoryFillDialog()" class="action-btn secondary-btn" style="flex: 1; padding: 0.9rem;">
                ❌ Cancel
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>  <!-- Close memory-viewer tab-content -->

  </div>  <!-- Close container -->

  </div>  <!-- Close container -->

  <div class="footer">Made with ❤️ by Atrishman Mukherjee | COA Educational Tools © 2025</div>

  <!-- External JavaScript -->
  <script src="script.js"></script>
</body>
</html>
